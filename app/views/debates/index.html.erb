<div class = "container">
		<div class = "row">
			<div class = "col-md-3 col-sm-4 col-xs-0">
			</div>

			<div class="col-md-6 col-sm-8 new_topic_container_box_main">
				
				<div class = "small_devider">
				</div>



		<div class="panel panel-default new_topic_container_box">
			
				<div class="stepwizard">
					<div class="stepwizard-row setup-panel">
						<div class="stepwizard-step">
							<a href="#step-1" type="button" class="btn tab_nav_btn btn-primary btn-circle">What</a>
							<p>(Topic)</p>
						</div>
						<div class="stepwizard-step">
							<a href="#step-2" type="button" class="btn tab_nav_btn btn-default btn-circle" >Why</a>
							<p>(Your Take)</p>
						</div>
						<div class="stepwizard-step">
							<a href="#step-3" type="button" class="btn tab_nav_btn btn-default btn-circle" >Who</a>
							<p>(Challenge Someone)</p>
						</div>
					</div>
				</div>
				
					<div class="row setup-content" id="step-1">
						<div class="col-xs-12">
							<div class="col-md-12">
								
								<div class="form-group">
									<label class="control-label">topic of interest</label>
									 <input id = "og_topic_input_box" type="text" class="form-control" placeholder="your topic ...">
									 <div class = "small_devider"> </div>
									<label class="control-label">or url</label>
									 <div class="input-group">
									      <input type="text" id = "ogp_url_field" class="form-control" placeholder="url...">
									      <span class="input-group-btn">
									        <button id = "import_button" class="btn import_btn btn-default" type="button"><span class = "hidden" id = "import_button_importing"><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw margin-bottom"></i>importing ...</span><span id = "import_btn_import_label" class = "">Import</span></button>
									      </span>
									  </div><!-- /input-group -->
									  <div class = "small_devider"> </div>
									  <div id = "ogp_object_display" class = "hidden open_graph_object_display">

									  </div>
								</div>
								
								<button class="btn btn-primary nextBtn btn-sm pull-right" type="button" >Next</button>
							</div>
						</div>
					</div>
					<div class="row setup-content" id="step-2">
						<div class="col-xs-12">
							<div class="col-md-12">
								
								<div class="form-group">
									<label class="control-label">your opinion</label>
									<input id = "og_opinion" maxlength="200" type="text" required="required" class="form-control" placeholder="In my opinion ..." />
								</div>
								<label class="control-label">or question </label>
								<div class="input-group">
									
								  <input id = "og_question" type="text" class="form-control" placeholder="I wonder ..." aria-describedby="basic-addon2">
								  <span class="input-group-addon" id="basic-addon2">?</span>
								</div>
								<div class = "small_devider"> </div>
								<button class="btn btn-primary nextBtn btn-sm pull-right" type="button" >Next</button>
							</div>
						</div>
					</div>
					<div class="row setup-content" id="step-3">
						<div class="col-xs-12">
							<div class="col-md-12">
									
									<span><strong>pick an opponent</strong></span>
									<hr style = "margin-top: 10px;">
									<ul>
										<% Account.all.each do |user|%>
										<li class = "opponent" opponent-id = <%= user.id%> picked = "false">
											<%= render partial: "topics/partials/user_bar", locals: {user: user}%>
											<div class = "small_devider"></div>
										</li>
										<%end%>
									</ul>

									<div class = "row">
									
									<div class="col-md-12 poster_bar_left ">
										<button class="btn btn-primary pull-right">recommend me</button>
									</div>
									
									</div>



									
									<hr style = "margin-top: 10px;">
									<div class = "row"> 
										<div class = "col-md-12">
											<span><strong>or send an email invitation</strong></span>
											<hr style = "margin-top: 10px;">
											
										      <input id = "og_invitation_email_box" type="text" class="form-control" placeholder="email...">
										      
										    
										</div>
									</div>
									<hr>
								<button id = "og_topic_submit_button" class="btn btn-success btn-submit pull-right">submit</button>
							</div>
						</div>
					</div>
				
			
		</div>
		<div class = "creating_rich_topic_banner hidden">
			<i class="fa fa-spinner fa-spin fa-3x fa-fw margin-bottom"></i>
	        <div>
	          Creating ...
	        </div>
		</div>
			</div>

		</div>

		<div class="col-md-3 col-sm-0">
		</div>
	</div>
	<script type="text/javascript">
		display_curtain = function(){
			rich_curtain_height = $(".new_topic_container_box_main").height();
			rich_curtain_top =  $(".new_topic_container_box_main").position().top;
			rich_curtain_padding_top = (rich_curtain_height/2) - 50
    		$(".creating_rich_topic_banner").css({height: rich_curtain_height-30});
    		$(".creating_rich_topic_banner").css({top:  (10-rich_curtain_height)});
    		$(".creating_rich_topic_banner").css({"padding-top": rich_curtain_padding_top});
    		$(".creating_rich_topic_banner").removeClass("hidden");
		}

		succeed_and_hide_curtain = function(){

			$(".creating_rich_topic_banner").addClass("hidden");
		}

		hide_import_label_and_show_loading = function() {
			$("#import_btn_import_label").addClass("hidden");
			$("#import_button_importing").removeClass("hidden");


		}
		show_import_label_and_hide_loading = function() {
			$("#import_btn_import_label").removeClass("hidden");
			$("#import_button_importing").addClass("hidden");


		}

		ogp_url = function(){
			$("#ogp_object_display").empty();
			$("#ogp_object_display").removeClass("hidden");
			return $("#ogp_url_field").val();
		}

		display_ogp = function(data){
			show_import_label_and_hide_loading();
			console.log('HI');
			$("#ogp_object_display").append(data);
		}

		$("#import_button").click(function(){
			hide_import_label_and_show_loading();
			console.log(ogp_url())
			var ogp_caller = new AjaxHandler("none", "<%= root_url%>"+"ajax_calls/fetch_ogp_object", "POST", {url: ogp_url()} , display_ogp);
      			ogp_caller.make_call();

		});


		prepare_opponent_list = function(){
		    t = new Array();
		    j_list = $(".opponent");
		    j_list.each(function(element){
		    t[element] = j_list[element];
		    });
		    return t;
		}
		var opponent_list_radio_buttons = new RadioList(prepare_opponent_list(), "glyphicon-check", "glyphicon-unchecked");

		get_selected_opponent_id = function(){
		  id = -1;
		  prepare_opponent_list().forEach(function(element){
		    if ($(element).attr("picked") == "true"){
		      // console.log(element);
		      id = $(element).attr("opponent-id");
		    }
		    
		  });
		  return id;
		}

		param_extractor = function(){
			response_json = {topic_sentence: $("#og_topic_input_box").val(), description: "", og_url: $("#ogp_url_field").val(), left_side_topic: $("#og_opinion").val(), selected_opponent_id: get_selected_opponent_id(), opponent_email: $("#og_invitation_email_box").val()}	
			return 	response_json;

		}

		creating_loading = function(){
			console.log("creating ...");
		}

		succeeded_banner = function(){
			succeed_and_hide_curtain();
			
		}

		$("#og_topic_submit_button").click(function(){
			display_curtain();
			console.log(param_extractor())
			creating_loading();
			var og_topic_create = new AjaxHandler("none", "<%= root_url%>"+"topics/og_create", "POST", param_extractor() , succeeded_banner);
      			og_topic_create.make_call();
		});



	</script>